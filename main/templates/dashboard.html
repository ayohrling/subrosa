{% extends "layout.html" %}

{% block titlebar %}
{% with header_context="DASHBOARD" %}
{% include "header.html" %}
{% endwith %}
{% endblock %}

{% block content %}
<div class="dashboard-header"></div>

{% if articles.count() %}
<div class="article-table col-md-8 col-md-offset-2">

	<table class="table table-hover">
		<legend>Your articles</legend>
		<thead>
			<tr>
				<th>#</th>
				<th>Title</th>
				<th>Last updated</th> <th>Status</th>
				<th>Actions</th>
			</tr>


		</thead>

		{% for article in articles %}
		<tr >
		<td> {{ loop.index }} </td>
		<td><a href="{{ url_for('article_view', id = article.id) }} ">{{ article.title | truncate(35) }} </a></td>
		<td>{{ article.date_updated.strftime('%Y-%m-%d %H:%M') }} </td>
		<td>{% if article.draft == False %}
		<span class="text-success"><i class="icon-ok"></i>Published</span>
			{% else %}
			<span class="text-warning">Draft</span>
			{% endif %}</td>
			<td>
			{% if article.draft == False %}
			<span class="text-muted mini-icon" > <i class="icon-link-ext-alt"></i></span>
			{% else %}
			<a href="#" data-href="{{ url_for('publish_article', id = article.id) }}" data-toggle="confirmation" class="mini-icon pub-ico" data-toggle="tooltip" title="Publish" ><i class="icon-link-ext-alt"></i></a>
			{% endif %}
			<a href="{{ url_for('edit_article', id = article.id) }}" class="mini-icon edit-ico" data-toggle="tooltip" title="Edit"><i class="icon-pencil-squared"></i></a>
			<a href="#" data-href="{{ url_for('delete_article', id = article.id) }}" class="mini-icon del-ico" data-toggle="confirmation" data-toggle="tooltip" title="Delete"><i class="icon-minus-squared"></i></a>
			</td>
		</tr>
		{% endfor %}
	</table>
</div>
{% else %}
<h4 class="text-center text-muted" style="margin: 4em 0">No articles written yet</h4>
{% endif %}

{% endblock %}
{% block footer %}
{% include 'footer.html' %}
{% endblock %}
