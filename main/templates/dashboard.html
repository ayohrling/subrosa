{% extends "layout.html" %}

{% block titlebar %}
{% with header_context="DASHBOARD" %}
{% include "header.html" %}
{% endwith %}
{% endblock %}

{% block content %}

<div id="dashboard-panel" class="col-md-6 col-md-offset-3">
<div id="dashboard-header"><h2>SETTINGS</h2></div>

<form action="{{ url_for('configure')}}" method="POST">
<div class="form-group">
<input type="text" placeholder="Link color" class="form-control" name="color">
</div>
<div class="form-group">
	
</div>
<div class="form-group">
	<label for="show-gallery"> Show Gallery
<input type="checkbox" name="show-gallery" id="" {{'checked' if settings.gallery }}>
</label>
</div>
<div class="form-group">
	<label for="show-projects">Show Projects
<input type="checkbox" name="show-projects" id="" {{'checked' if settings.projects }}>
	</label>
</div>

<div class="form-group">
	<label for="articles-num">Number of articles on index page</label>
	<input type="text" name="articles-num" id="">
</div>
<div class="form-group">
	<label for="images-num">Number of images in gallery</label>
	<input type="text" name="images-num" id="">
</div>

<input type="submit" value="Submit" class="btn btn-default">
</form>

</div>




<div class="col-md-6 col-md-offset-3" id="articles-table">

	<table class="table table-striped table-responsive">
		<legend><small>Articles</small></legend>
		<thead>
			<tr>
				<th>#</th>
				<th>Title</th>
				<th>Last updated</th> <th>Status</th>
				<th>Actions</th>
			</tr>


		</thead>
		{% for article in articles %}
		<tr >
		<td> {{ loop.index }} </td>
		<td><a href="{{ url_for('article_view', slug = article.slug) }} ">{{ article.title | truncate(35) }} </a></td>
		<td>{{ article.date_updated.strftime('%Y-%m-%d %H:%M') }} </td>
		<td>{% if article.draft == False %}
		<span class="text-success"><i class="icon-ok"></i>Published</span>
			{% else %}
			<span class="text-warning">Draft</span>
			{% endif %}</td>
			<td>
			{% if article.draft == False %}
			<span class="text-muted mini-icon" > <i class="icon-link-ext-alt"></i></span>
			{% else %}
			<a href="#" data-href="{{ url_for('publish_article', id = article.id) }}" data-toggle="confirmation" class="mini-icon pub-ico" data-toggle="tooltip" title="Publish" ><i class="icon-link-ext-alt"></i></a>
			{% endif %}
			<a href="{{ url_for('edit_article', id = article.id) }}" class="mini-icon edit-ico" data-toggle="tooltip" title="Edit"><i class="icon-pencil-squared"></i></a>
			<a href="#" data-href="{{ url_for('delete_article', id = article.id) }}" class="mini-icon del-ico" data-toggle="confirmation" data-toggle="tooltip" title="Delete"><i class="icon-minus-squared"></i></a>
			</td>
		</tr>
		{% endfor %}
	</table>
</div>

{% if settings.projects %}
	<div class="col-md-4 col-md-offset-4" id="projects-table">
	<table class="table table-striped table-responsive">
		<legend><small>Projects</small> <a href="{{ url_for('create_project' )}}"><i class="icon-feather"></i></a></legend>
		<thead>
			<th>#</th>
			<th>Title</th>
			<th>Actions</th>
		</thead>
		{% for project in projects %}
			<tr> 
			<td>{{ loop.index }}</td>
			<td><a href="{{ url_for('edit_project', id = project.id )}}">{{ project.title | truncate(30) }}</a></td>
			<td>
				<a href="{{ url_for('delete_project', id = project.id)}}" class="mini-icon" data-toggle="confirmation tooltip" title="Delete"><i class="icon-minus-squared"></i></a>
			</td>
			</tr>

		{% endfor %}
	</table>

	</div>
{% endif %}

{% endblock %}
{% block footer %}
{% include 'footer.html' %}
{% endblock %}
