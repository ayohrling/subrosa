{% extends "layout.html" %}

{% block titlebar %}
{% include "header.html" %}
{% endblock %}

{% block content %} 
<div class="index-wrapper col-xs-12">

{% if settings.bg %}
<div class="index-image col-md-4 hidden-xs hidden-sm">
{% if settings.show_info %}
<div id="index-user-info">
{% if images.portrait %}

	<div id="index-portrait" style="background-image: url({{ url_for('send_image', filename = images.portrait)}})"> </div>

{% endif %}
	<h3>{{ user.real_name }}</h3>
	<p>{{ user.description }}</p>
	
</div>


{% endif %}
</div>
{% endif %}

<div class="article-list col-md-6 ">

<div id="index-header">
	{% if images.logo %}
		<img id="site-logo" src="{{ url_for('send_image', filename = images.logo)}}"></img>
	{% else %}
		<h1 class="text-center" id="site-title">{{ settings.title }}</h1>
	{% endif %}
</div>
{% if articles_written %}
	{% for article in articles %}
	<article class="article-list-entry col-xs-12">
		<div class="article-list-title col-xs-12">
			<a href="{{ url_for('article_view', slug = article.slug )}}" class="article-title-link"><h3 class="text-center">{{ article.title }}</h3></a>
			<p class="date-created">{{ article.date_created.strftime("%B %d %Y") }}</p>
			{% if settings.disqus %}
			<a href="{{ url_for('article_view', slug = article.slug )}}#disqus_thread" class="article-comments-count" data-disqus-identifier="{{ article.slug }}">&nbsp;</a>
			{% endif %}
		</div>
		<div class="article-list-body col-xs-12">
		{% if article.header %}
			{{ article.header }}
		{% else %}
			{{ article.body |truncate(200 + range(40)| random )|markdown }}
		{% endif %}
		</div>

		{% if not loop.last %}
		<h1 style="text-align: center">&hellip;</h1>
		{% endif %}
	</article>
	{% endfor %}

	{% if show_pagination %}
	<div class="article-list-pagination col-md-6 col-md-offset-3">


		{% if pagination.has_prev %}
		<a href="{{ url_for('index', page = pagination.page - 1)}}" style="width: 100px;" class="btn btn-default articles-pagination-btn" id="prev">Previous</a>
		{% else %}

		<a href="#" class="btn btn-default articles-pagination-btn" id="prev" style="width: 100px;" disabled>Previous</a>

		{% endif %}

		{% if pagination.has_next %}

		<a href="{{ url_for('index', page = pagination.page + 1)}}" id = "next" style="width:100px" class=" articles-pagination-btn btn btn-default">Next</a>
		{% else %}

		<a href="#" class="btn btn-default articles-pagination-btn" id = "next" style="width: 100px" disabled>Next</a>
		{% endif %}

	</div>

	{% endif %}




</div>


{% else %}
<h4 class="text-center text-muted" style="margin: 4em 0">No articles here yet, maybe write some cowboy...</h4>
</div>
{% endif %}
	
</div>
{% endblock %}

{% block footer %}
{% if settings.disqus %}

<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = '{{ settings.disqus }}'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
var s = document.createElement('script'); s.async = true;
s.type = 'text/javascript';
s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>
{% endif %}
{% endblock %}


