{% extends "layout.html" %}

{% block titlebar %}
{% with header_context="IMAGES" %}
{% include 'header.html' %}
{% endwith %}
{% endblock %}

{% block modals %}
	<div class="source-window mfp-hide" id="source-window">
		<div class="form-group">
		<label><small>full image path:</small></label>
		<input type="text" id="full-src" class="form-control " >
		</div>
		<div class="form-group">
			<label><small>thumbnail image path:</small></label>
			<input type="text" id="thumb-src" class="form-control" >
		</div>
	</div>

{% endblock %}

{% block content %} 

{% if images_uploaded %}
<div class="gallery-wrapper">
	{% for image in images %}
	<div class="gallery-image size22 {{ 'galleried' if image.gallery }} {{ 'imgur' if image.imgur_img }}" data-vert="{{ image.is_vertical }}" >
		<a href="#" class="show-img ajax-popup-link" data-mfp-src="{{ image.image_link }}" style="color: #fff">
			<div class="img-holder" style="background-image: url({{ add_thumbnail_affix(image.image_link, settings.thumbnail_size ) if image.imgur_img else image.image_link }})">
				<div class="img-overlay"></div>
				<div class="img-desc">
					{% if image.description %}
						{{ image.description }}
					{% else %}
						<i class="icon-search" style="font-size: 2em; opacity: 0.8"></i>
					{% endif %}
				</div>
			</div>
		</a>

		<div class="image-toolbar">
			<span class="img-icons">
				<a href="{{ url_for('gallerify', id = image.id)}}"><i class="{{ 'icon-minus' if image.gallery else 'icon-plus'}}"></i></a>
				<a href="#source-window" class="show-src" data-fullsrc="{{ image.image_link}}" data-thumb="{{ add_thumbnail_affix(image.image_link, settings.thumbnail_size ) }}"><i class="icon-at"></i></a>
				<a href="#" data-toggle="confirmation" data-href="{{ url_for('delete_image', id = image.id)}}"><i class="icon-cancel"></i></a>
			</span>
		</div>
	</div>

	{% endfor %}

	{% if show_pagination %}

		{% if pagination.has_prev %}

			<a href="{{ url_for('user_images', username = session.user, page = pagination.page - 1)}}" class="gallery-pagination-btn" id="prev"><i class="icon-angle-left"></i></a>

		{% else %}

			<a href="#" class="gallery-pagination-btn" id="prev" disabled><i class="icon-angle-left"></i></a>

		{% endif %}

		{% if pagination.has_next %}

			<a href="{{ url_for('user_images', username = session.user, page = pagination.page + 1)}}" id = "next" class="gallery-pagination-btn"><i class="icon-angle-right"></i></a>

		{% else %}

			<a href="#" class="gallery-pagination-btn" id = "next" disabled><i class="icon-angle-right"></i></a>

		{% endif %}

	{% endif %}

</div>

{% else %}

	<h4 class="text-center text-muted" style="margin: 4em 0">No images uploaded yet</h4>

{% endif %}



{% endblock %}

{% block footer %}
{% include 'footer.html' %}
{% endblock %}